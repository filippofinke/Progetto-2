<html>
  <head>
    <title>PhotocellToLEDIntensity Guida</title>
    <meta charset="UTF-8">
    <meta name="author" content="Filippo Finke">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
    <h1>Esempio PhotocellToLEDIntensity</h1>
    <hr>
    <h2>Descrizione</h2>
    <p>
      Circuito che mostra come leggere il valore della luminosità ed assegnarlo al LED.
    </p>
    <hr>
    <h2>Materiale</h2>
    <ul>
      <li>Un Digispark</li>
      <li>Un led</li>
      <li>Una fotocellula</li>
      <li>Una resistenza da 330Ω</li>
      <li>Una resistenza da 10KΩ</li>
    </ul>
    <hr>
    <h2>Schema</h2>
    <h3>Descrizione del funzionamento</h3>
    <p>All’interno del circuito sono presenti quattro componenti: 1 fotocellula, 1 LED e 2 resistenze. La fotocellula è collegata in pull-down attraverso una resistenza da 10kΩ al pin “P3”. Il LED è attaccato al pin “P1” del Digispark attraverso una resistenza da 330Ω. Il valore letto dalla fotocellula viene assegnato al LED.</p>
    <img src="../../Images/Circuit diagrams/PhotocellLed_bb.svg" alt="PhotocellLed">
    <hr>
    <h2>Codice</h2>
    <pre>
/**
 * Includo le librerie.
 */
#include &#x3C;photocell.h&#x3E;
#include &#x3C;led.h&#x3E;

/**
 * Istanzio un oggetto di tipo Photocell.
 */
Photocell photocell(3);
/**
 * Istanzio un oggetto di tipo Led.
 */
Led led(4);
/**
 * Imposto un valore minimo di luminosit&#xE0; della resistenza.
 */
int minLux = 0;
/**
 * Imposto un valore massimo di luminosit&#xE0; della resistenza.
 */
int maxLux = 1023;

/**
 * Metodo di setup, viene eseguito una sola volta.
 */
void setup() {
}

/**
 * Metodo che viene eseguito all&#x27;infinito.
 */
void loop() {
  //Ricavo la luminosit&#xE0;.
  int lux = photocell.getLux();
  //Converto il valore di luminosit&#xE0; in un altra scala.
  int analogValue = map(lux, minLux, maxLux, 0, 255);
  //Imposto la luminosit&#xE0; del led.
  led.setAnalogState(analogValue);
}
    </pre>
  </body>
</html>
