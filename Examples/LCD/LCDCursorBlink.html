<html>
  <head>
    <title>LCDCursorBlink Guida</title>
    <meta charset="UTF-8">
    <meta name="author" content="Filippo Finke">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">
  </head>
  <body>
    <h1>Esempio LCDCursorBlink</h1>
    <hr>
    <h2>Descrizione</h2>
    <p>
      Circuito che permette di mostrare la posizione del cursore all'interno del display LCD.
    </p>
    <hr>
    <h2>Materiale</h2>
    <ul>
      <li>Un Digispark</li>
      <li>Un LCD</li>
      <li>Uno shift register</li>
    </ul>
    <hr>
    <h2>Schema</h2>
    <h3>Descrizione del funzionamento</h3>
    <p>All’interno del circuito sono presenti due componenti:
1 display a cristalli liquidi (LCD) e 1 shift register.
Lo shift register viene alimentato dal digispark ed è
collegato ai relativi pin SCL(“P2”) e SDA(“P0”).
Mentre il display LCD è collegato interamente allo shift
register. Il display stampa del testo ad un intervallo specifico mostrando la posizione del cursore.</p>
    <img src="../../Images/Circuit diagrams/LCD_bb.svg" alt="LCD">
    <hr>
    <h2>Codice</h2>
    <pre>
/**
 * Includo le librerie.
 */
#include &#x3C;TinyWireM.h&#x3E;
#include &#x3C;LiquidCrystal_I2C.h&#x3E;

/**
 * Istanzio un oggetto di tipo LCD all&#x27;indirizzo 0x27, con 16 caratteri e due righe.
 */
LiquidCrystal_I2C lcd(0x27,16,2);

/**
 * Metodo di setup, viene eseguito una sola volta.
 */
void setup() {
  //Avvio la comunicazione I2C.
  TinyWireM.begin();
  //Preparo il display LCD.
  lcd.init();
  //Accendo la retroilluminazione.
  lcd.backlight();
}

/**
 * Metodo che viene eseguito all&#x27;infinito.
 */
 void loop() {
   //Disabilito lo sfarfallio del cursore.
   lcd.noBlink();
   //Stampo all&#x27;interno del display la scritto &#x22;Non blinka!&#x22; e aspetto 5 secondi.
   printMessage(&#x22;Non blinka!&#x22;, 5);
   //Abilito lo sfarfallio del cursore.
   lcd.blink();
   //Stampo all&#x27;interno del display la scritto &#x22;Blinka!&#x22; e aspetto 5 secondi.
   printMessage(&#x22;Blinka!&#x22;, 5);
 }
 /**
  * Metodo utilizzato per stampare all&#x27;interno del display con un timer.
  *
  * @param message Il messaggio da stampare.
  * @param seconds Quanti secondi aspettare.
  */
 void printMessage(String message, int seconds) {
  //Per ogni secondo eseguo:
  for(int x = seconds; x &#x3E; 0; x--) {
      //Cancello le scritte all&#x27;interno del display.
      lcd.clear();
      //Imposto il cursore in alto a sinistra.
      lcd.setCursor(0, 0);
      //Scrivo nel display il messaggio.
      lcd.print(message);
      //Mi sposto in basso a sinistra.
      lcd.setCursor(0, 1);
      //Stampo un messaggio di attesa.
      lcd.print(&#x22;Aspetto &#x22; + String(x) + &#x22; sec!&#x22;);
      //Sposto il cursore nella posizione 10 della prima riga.
      lcd.setCursor(10,0);
      //Aspetto 1 secondo.
      delay(1000);
  }
}
    </pre>
  </body>
</html>
